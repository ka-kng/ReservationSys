# 予約システム - 要件定義書

# 1 概要

病院向けの予約システムを作成し、患者の予約受付と管理者による効率的な予約管理を実現する。

# 2 目的
・ユーザー（患者）が簡単に予約できる仕組みを提供する
・管理者が予約状況を把握・調整しやすくする
・メール通知によって患者・管理者双方に安心感を提供する
・将来的にレポート機能を追加し、運営改善に役立てる

# 3 想定ユーザーと役割


ロール　　|　説明　　　　　　　　　　　　　|　主な権限
ーーーーー|ーーーーーーーーーーーーーーーー|ーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーー
患者　　　|　ログイン不要で予約するユーザー|　カレンダーから予約、情報入力、予約番号メール受信
ーーーーー|ーーーーーーーーーーーーーーーー|ーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーー
管理者　　|　病院スタッフ（ログイン必須）　|　予約一覧表示、予約追加／編集／削除、キャンセル対応、診療枠の設定
ーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーーー

# 4 主な機能一覧

# 4-1 認証/アカウント管理（管理者）
・管理者ログイン（メール認証必須）
・パスワードリセット
・管理者プロフィール管理（名前・メール）

# 4-2 予約
・カレンダーで日付選択
・時間帯選択（診療時間内のみ）
・予約フォーム入力
　　必須：氏名、氏名（ふりがな）、生年月日、性別、電話番号　初診か再診か
　　任意：メールアドレス、メールアドレス（確認用）　症状開始時期、症状の内容（複数選択可）、既往歴・服薬情報、アレルギー、周囲の風邪症状、味覚障　　　　　害、自由記入メモ
・入力内容の確認画面表示
・送信後、予約番号を生成しメール通知

# 4-3 予約管理（管理者）
・予約一覧表示（検索・フィルタあり）
・予約詳細確認（患者情報・症状・予約番号）
・予約のキャンセル
・キャンセル処理（患者からは不可、管理者のみ）
・営業時間内での予約枠設定
・午前・午後などの大枠設定 → 自動で細かいスロット生成
・DBに予約済みフラグ is_booked を持たせることで重複防止
管理画面      ──>  DB  ──> 予約フォーム
日付・時間帯の設定  保存    表示
・フォームから送られた内容でPDF化を可能にし、問診表をダウンロード可能にする
・曜日で一括登録
・同時間帯の最大人数制限(1人)

# 4-4 通知
・予約完了時に患者へ予約番号付きメール送信
・管理者へ新規予約通知メール（任意）

# 5 今後の拡張候補
・レポート機能（来院数、キャンセル率、時間帯別予約状況）

# 6 用語定義
・予約番号：予約を一意に識別するランダム文字列（例：6桁英数字）
・診療枠：管理者が設定した診療可能な日時の単位
・最大人数制限：同じ診療枠に予約できる上限人数
